library(shiny); runApp('memoria.R')
runApp()
runApp('memoria.R')
lll = Mapear(
datos = datosPorDepto,ColoresPartido = ColoresPartido, Mapa = departamentos
)
View(ColoresPartido)
runApp()
ActualizarMapa = FALSE
if (!"MapaDatos.RData" %in% list.files(path = "data")) ActualizarMapa = TRUE
ActualizacionArchivosMapa = sapply(
list.files(path = "data/Mapa", full.names = TRUE, recursive = TRUE),
function(x) file.info(x)$mtime)
ActualizacionArchivosMapa = as_datetime(ActualizacionArchivosMapa) %>% max(., na.rm = TRUE)
ActualizacionDatos = file.info("data/MapaDatos.RData")$mtime
ActualizacionProceso = file.info("data/datosMapas.R")$mtime
ActualizacionProceso
ActualizacionArchivosMapa
ActualizacionArchivosMapa = sapply(
list.files(path = "data/Mapa", full.names = TRUE, recursive = TRUE),
function(x) file.info(x)$mtime)
sort(as_datetime(ActualizacionArchivosMapa))
library(tidyverse)
convertirHoras = function(t){
h = floor(t / 3600)
m = floor((t - h * 3600) / 60)
s = floor(t - h * 3600 - m * 60)
horas = ifelse(h == 1, "hora,", "horas,")
minutos = ifelse(m == 1, "minuto,", "minutos,")
segundos = ifelse(s == 1, "segundo", "segundos")
if (t > 3600){
r = paste(h, horas, m, minutos, s, segundos)
} else if (t > 60){
r = paste(m, minutos, s, segundos)
} else {
r = paste(s, segundos)
}
return(r)
}
modificacion = file.info("data/datosPrimarios.R")$mtime
Actualizar = FALSE
if (!"ListaDatos.RData" %in% list.files(path = "data")){
Actualizar = TRUE
} else if (file.info("data/ListaDatos.RData")$mtime < modificacion){
Actualizar = TRUE
}
if (Actualizar){
cat("Datos Primarios\n")
try({
t = proc.time()
source("data/datosPrimarios.R", encoding = "UTF-8")
cat("OK actualización ")
cat(convertirHoras((proc.time() - t)[3]), "\n")
})
}
if (!all(c("ambitos", "datosGral", "datosPASO", "datosBallotage", "Colores") %in% list.files())){
load(file = "data/ListaDatos.RData")
cat("OK carga datos Primarios")
}
CambioLugares = function(datos) {
datos %>%
mutate(NAM = case_when(
grepl("Comuna 0", seccion_nombre) ~ sub("Comuna 0", "Comuna ", seccion_nombre),
seccion_nombre == "Puan" & distrito_nombre == "Buenos Aires" ~ "Puán",
seccion_nombre == "Coronel de Marina L. Rosales" &
distrito_nombre == "Buenos Aires" ~ "Coronel de Marina Leonardo Rosales",
seccion_nombre == "Luján de Cuyo" & distrito_nombre == "Mendoza" ~ "Cuyo",
seccion_nombre == "Jáchal" & distrito_nombre == "San Juan" ~ "Jachal",
seccion_nombre == "General Ortiz de Ocampo" & distrito_nombre == "La Rioja" ~ "General Ocampo",
seccion_nombre == "General Juan Facundo Quiroga" &
distrito_nombre == "La Rioja" ~ "General Juan F. Quiroga",
seccion_nombre == "Ángel Vicente Peñaloza" &
distrito_nombre == "La Rioja" ~ "General  Angel V. Peñaloza",
seccion_nombre == "San Blas de los Sauces" &
distrito_nombre == "La Rioja" ~ "San Blas de Los Sauces",
seccion_nombre == "Valle Viejo" & distrito_nombre == "Catamarca" ~ "Valle viejo",
seccion_nombre == "Silípica" & distrito_nombre == "Santiago del Estero" ~ "Silipica",
seccion_nombre == "Mayor Luis J. Fontana" &
distrito_nombre == "Chaco" ~ "Mayor Luis Jorge Fontana",
seccion_nombre == "1º de Mayo" & distrito_nombre == "Chaco" ~ "1ro. de Mayo",
seccion_nombre == "25 de Mayo" & distrito_nombre == "Misiones" ~ "25de Mayo",
seccion_nombre == "Chical Có" & distrito_nombre == "La Pampa" ~ "Chical Co",
seccion_nombre == "9 de Julio" & distrito_nombre == "Río Negro" ~ "9 de julio",
TRUE ~ seccion_nombre
))
}
CambioCircuitos = function(datos){
ParaProcesoCordoba = c(
"Cruz del Eje", "Ischilín", "Totoral", "Río Seco", "San Justo", "Colón", "Punilla", "Tulumba")
ParaProcesoCordobaCirc = Cordoba %>% filter(departamen %in% ParaProcesoCordoba) %>% .$circuito
ParaProcesoMendoza = c(
"Las Heras", "Santa Rosa", "La Paz", "San Rafael", "General Alvear", "Malargüe")
ParaProcesoMendozaCirc = Mendoza %>% filter(departamen %in% ParaProcesoMendoza) %>% .$circuito
r = datos %>%
mutate(
circuito_nombre = case_when(
(distrito_nombre == "Córdoba" & seccion_nombre %in% ParaProcesoCordoba &
!circuito_id %in% ParaProcesoCordobaCirc) |
(distrito_nombre == "Mendoza" & seccion_nombre %in% ParaProcesoMendoza &
!circuito_id %in% ParaProcesoMendozaCirc) ~ paste(
"en proceso de división -", seccion_nombre),
distrito_nombre == "Salta" & circuito_id %in% paste0("8", LETTERS[1:3]) ~ "8",
distrito_nombre == "Salta" & circuito_id %in% paste0("9", LETTERS[1:2]) ~ "9",
distrito_nombre == "Salta" & circuito_id %in% paste0("20", LETTERS[1:1]) ~ "20",
distrito_nombre == "Salta" & circuito_id %in% paste0("21", LETTERS[1:2]) ~ "21",
distrito_nombre == "Salta" & circuito_id %in% paste0("22", LETTERS[1:6]) ~ "22",
distrito_nombre == "Salta" & circuito_id %in% paste0("23", LETTERS[1:1]) ~ "23",
distrito_nombre == "Salta" & circuito_id %in% paste0("24", LETTERS[1:6]) ~ "24",
distrito_nombre == "Salta" & circuito_id %in% paste0("25", LETTERS[1:6]) ~ "25",
distrito_nombre == "Salta" & circuito_id %in% paste0("26", LETTERS[1:3]) ~ "26",
distrito_nombre == "Salta" & circuito_id %in% paste0("27", LETTERS[1:4]) ~ "27",
distrito_nombre == "Salta" & circuito_id %in% paste0("28", LETTERS[1:8]) ~ "28",
distrito_nombre == "Salta" & circuito_id %in% paste0("29", LETTERS[1:9]) ~ "29",
distrito_nombre == "Salta" & circuito_id %in% paste0("30", LETTERS[1:2]) ~ "30",
distrito_nombre == "Salta" & circuito_id %in% paste0("31", LETTERS[1:4]) ~ "31",
distrito_nombre == "Salta" & circuito_id %in% paste0("32", LETTERS[1:2]) ~ "32",
distrito_nombre == "Salta" & circuito_id %in% paste0("33", LETTERS[1:3]) ~ "33",
distrito_nombre == "Salta" & circuito_id %in% paste0("34", LETTERS[1:2]) ~ "34",
distrito_nombre == "Salta" & circuito_id %in% paste0("35", LETTERS[1:1]) ~ "35",
distrito_nombre == "Salta" & circuito_id %in% paste0("36", LETTERS[1:2]) ~ "36",
distrito_nombre == "Salta" & circuito_id %in% paste0("37", LETTERS[1:1]) ~ "37",
distrito_nombre == "Salta" & circuito_id %in% paste0("38", LETTERS[1:2]) ~ "38",
distrito_nombre == "Salta" & circuito_id %in% paste0("39", LETTERS[1:1]) ~ "39",
distrito_nombre == "Salta" & circuito_id %in% paste0("40", LETTERS[1:3]) ~ "40",
distrito_nombre == "Salta" & circuito_id %in% paste0("41", LETTERS[1:5]) ~ "41",
distrito_nombre == "Salta" & circuito_id %in% paste0("42", LETTERS[1:3]) ~ "42",
distrito_nombre == "Salta" & circuito_id %in% paste0("43", LETTERS[1:7]) ~ "43",
distrito_nombre == "Salta" & circuito_id %in% paste0("44", LETTERS[1:7]) ~ "44",
distrito_nombre == "Salta" & circuito_id %in% paste0("45", LETTERS[1:1]) ~ "45",
distrito_nombre == "Salta" & circuito_id %in% paste0("46", LETTERS[1:11]) ~ "46",
distrito_nombre == "Salta" & circuito_id %in% paste0("47", LETTERS[1:3]) ~ "47",
distrito_nombre == "Salta" & circuito_id %in% paste0("48", LETTERS[1:4]) ~ "48",
distrito_nombre == "Salta" & circuito_id %in% paste0("49", LETTERS[1:11]) ~ "49",
distrito_nombre == "Salta" & circuito_id %in% paste0("50", LETTERS[1:3]) ~ "50",
distrito_nombre == "Salta" & circuito_id %in% paste0("51", LETTERS[1:6]) ~ "51",
distrito_nombre == "Salta" & circuito_id %in% paste0("56", LETTERS[1:7]) ~ "56",
distrito_nombre == "Salta" & circuito_id %in% paste0("57", LETTERS[1:2]) ~ "57",
distrito_nombre == "Salta" & circuito_id %in% paste0("58", LETTERS[1:1]) ~ "58",
distrito_nombre == "Salta" & circuito_id %in% paste0("59", LETTERS[1:1]) ~ "59",
distrito_nombre == "Salta" & circuito_id %in% paste0("60", LETTERS[1:1]) ~ "60",
distrito_nombre == "Salta" & circuito_id %in% paste0("61", LETTERS[1:1]) ~ "61",
distrito_nombre == "Salta" & circuito_id %in% paste0("63", LETTERS[1:1]) ~ "63",
distrito_nombre == "Salta" & circuito_id %in% paste0("64", LETTERS[1:2]) ~ "64",
distrito_nombre == "Salta" & circuito_id %in% paste0("65", LETTERS[1:2]) ~ "65",
distrito_nombre == "Salta" & circuito_id %in% paste0("66", LETTERS[1:2]) ~ "66",
distrito_nombre == "Salta" & circuito_id %in% paste0("67", LETTERS[1:8]) ~ "67",
distrito_nombre == "Salta" & circuito_id %in% paste0("68", LETTERS[1:2]) ~ "68",
distrito_nombre == "Salta" & circuito_id %in% paste0("69", LETTERS[1:1]) ~ "69",
distrito_nombre == "Salta" & circuito_id %in% paste0("70", LETTERS[1:2]) ~ "70",
distrito_nombre == "Salta" & circuito_id %in% paste0("71", LETTERS[1:2]) ~ "71",
distrito_nombre == "Salta" & circuito_id %in% paste0("72", LETTERS[1:4]) ~ "72",
distrito_nombre == "Salta" & circuito_id %in% paste0("73", LETTERS[1:2]) ~ "73",
distrito_nombre == "Salta" & circuito_id %in% paste0("74", LETTERS[1:1]) ~ "74",
distrito_nombre == "Salta" & circuito_id %in% paste0("75", LETTERS[1:2]) ~ "75",
distrito_nombre == "Salta" & circuito_id %in% paste0("76", LETTERS[1:1]) ~ "76",
distrito_nombre == "Salta" & circuito_id %in% paste0("77", LETTERS[1:6]) ~ "77",
distrito_nombre == "Salta" & circuito_id %in% paste0("78", LETTERS[1:1]) ~ "78",
distrito_nombre == "Salta" & circuito_id %in% paste0("79", LETTERS[1:3]) ~ "79",
distrito_nombre == "Salta" & circuito_id %in% paste0("80", LETTERS[1:1]) ~ "80",
distrito_nombre == "Salta" & circuito_id %in% paste0("81", LETTERS[1:1]) ~ "81",
distrito_nombre == "Salta" & circuito_id %in% paste0("82", LETTERS[1:2]) ~ "82",
distrito_nombre == "Salta" & circuito_id %in% paste0("83", LETTERS[1:3]) ~ "83",
distrito_nombre == "Salta" & circuito_id %in% paste0("84", LETTERS[1:1]) ~ "84",
distrito_nombre == "Salta" & circuito_id %in% paste0("85", LETTERS[1:2]) ~ "85",
distrito_nombre == "Salta" & circuito_id %in% paste0("86", LETTERS[1:1]) ~ "86",
distrito_nombre == "Salta" & circuito_id %in% paste0("87", LETTERS[1:1]) ~ "87",
distrito_nombre == "Salta" & circuito_id %in% paste0("88", LETTERS[1:3]) ~ "88",
distrito_nombre == "Salta" & circuito_id %in% paste0("89", LETTERS[1:5]) ~ "89",
distrito_nombre == "Salta" & circuito_id %in% paste0("90", LETTERS[1:3]) ~ "90",
distrito_nombre == "Salta" & circuito_id %in% paste0("91", LETTERS[1:4]) ~ "91",
distrito_nombre == "Salta" & circuito_id %in% paste0("92", LETTERS[1:1]) ~ "92",
distrito_nombre == "Salta" & circuito_id %in% paste0("93", LETTERS[1:2]) ~ "93",
distrito_nombre == "Salta" & circuito_id %in% paste0("94", LETTERS[1:1]) ~ "94",
distrito_nombre == "Salta" & circuito_id %in% paste0("95", LETTERS[1:1]) ~ "95",
distrito_nombre == "Salta" & circuito_id %in% paste0("96", LETTERS[1:2]) ~ "96",
distrito_nombre == "Salta" & circuito_id %in% paste0("97", LETTERS[1:4]) ~ "97",
distrito_nombre == "Salta" & circuito_id %in% paste0("98", LETTERS[1:1]) ~ "98",
distrito_nombre == "Salta" & circuito_id %in% paste0("99", LETTERS[1:3]) ~ "99",
TRUE ~ circuito_nombre)) %>%
mutate(
circuito_id = case_when(
(distrito_nombre == "Córdoba" & seccion_nombre %in% ParaProcesoCordoba &
!circuito_id %in% ParaProcesoCordobaCirc) |
(distrito_nombre == "Mendoza" & seccion_nombre %in% ParaProcesoMendoza &
!circuito_id %in% ParaProcesoMendozaCirc) ~ paste(
"en proceso de división -", seccion_nombre),
distrito_nombre == "Salta" & circuito_id %in% paste0("8", LETTERS[1:3]) ~ "8",
distrito_nombre == "Salta" & circuito_id %in% paste0("9", LETTERS[1:2]) ~ "9",
distrito_nombre == "Salta" & circuito_id %in% paste0("20", LETTERS[1:1]) ~ "20",
distrito_nombre == "Salta" & circuito_id %in% paste0("21", LETTERS[1:2]) ~ "21",
distrito_nombre == "Salta" & circuito_id %in% paste0("22", LETTERS[1:6]) ~ "22",
distrito_nombre == "Salta" & circuito_id %in% paste0("23", LETTERS[1:1]) ~ "23",
distrito_nombre == "Salta" & circuito_id %in% paste0("24", LETTERS[1:6]) ~ "24",
distrito_nombre == "Salta" & circuito_id %in% paste0("25", LETTERS[1:6]) ~ "25",
distrito_nombre == "Salta" & circuito_id %in% paste0("26", LETTERS[1:3]) ~ "26",
distrito_nombre == "Salta" & circuito_id %in% paste0("27", LETTERS[1:4]) ~ "27",
distrito_nombre == "Salta" & circuito_id %in% paste0("28", LETTERS[1:8]) ~ "28",
distrito_nombre == "Salta" & circuito_id %in% paste0("29", LETTERS[1:9]) ~ "29",
distrito_nombre == "Salta" & circuito_id %in% paste0("30", LETTERS[1:2]) ~ "30",
distrito_nombre == "Salta" & circuito_id %in% paste0("31", LETTERS[1:4]) ~ "31",
distrito_nombre == "Salta" & circuito_id %in% paste0("32", LETTERS[1:2]) ~ "32",
distrito_nombre == "Salta" & circuito_id %in% paste0("33", LETTERS[1:3]) ~ "33",
distrito_nombre == "Salta" & circuito_id %in% paste0("34", LETTERS[1:2]) ~ "34",
distrito_nombre == "Salta" & circuito_id %in% paste0("35", LETTERS[1:1]) ~ "35",
distrito_nombre == "Salta" & circuito_id %in% paste0("36", LETTERS[1:2]) ~ "36",
distrito_nombre == "Salta" & circuito_id %in% paste0("37", LETTERS[1:1]) ~ "37",
distrito_nombre == "Salta" & circuito_id %in% paste0("38", LETTERS[1:2]) ~ "38",
distrito_nombre == "Salta" & circuito_id %in% paste0("39", LETTERS[1:1]) ~ "39",
distrito_nombre == "Salta" & circuito_id %in% paste0("40", LETTERS[1:3]) ~ "40",
distrito_nombre == "Salta" & circuito_id %in% paste0("41", LETTERS[1:5]) ~ "41",
distrito_nombre == "Salta" & circuito_id %in% paste0("42", LETTERS[1:3]) ~ "42",
distrito_nombre == "Salta" & circuito_id %in% paste0("43", LETTERS[1:7]) ~ "43",
distrito_nombre == "Salta" & circuito_id %in% paste0("44", LETTERS[1:7]) ~ "44",
distrito_nombre == "Salta" & circuito_id %in% paste0("45", LETTERS[1:1]) ~ "45",
distrito_nombre == "Salta" & circuito_id %in% paste0("46", LETTERS[1:11]) ~ "46",
distrito_nombre == "Salta" & circuito_id %in% paste0("47", LETTERS[1:3]) ~ "47",
distrito_nombre == "Salta" & circuito_id %in% paste0("48", LETTERS[1:4]) ~ "48",
distrito_nombre == "Salta" & circuito_id %in% paste0("49", LETTERS[1:11]) ~ "49",
distrito_nombre == "Salta" & circuito_id %in% paste0("50", LETTERS[1:3]) ~ "50",
distrito_nombre == "Salta" & circuito_id %in% paste0("51", LETTERS[1:6]) ~ "51",
distrito_nombre == "Salta" & circuito_id %in% paste0("56", LETTERS[1:7]) ~ "56",
distrito_nombre == "Salta" & circuito_id %in% paste0("57", LETTERS[1:2]) ~ "57",
distrito_nombre == "Salta" & circuito_id %in% paste0("58", LETTERS[1:1]) ~ "58",
distrito_nombre == "Salta" & circuito_id %in% paste0("59", LETTERS[1:1]) ~ "59",
distrito_nombre == "Salta" & circuito_id %in% paste0("60", LETTERS[1:1]) ~ "60",
distrito_nombre == "Salta" & circuito_id %in% paste0("61", LETTERS[1:1]) ~ "61",
distrito_nombre == "Salta" & circuito_id %in% paste0("63", LETTERS[1:1]) ~ "63",
distrito_nombre == "Salta" & circuito_id %in% paste0("64", LETTERS[1:2]) ~ "64",
distrito_nombre == "Salta" & circuito_id %in% paste0("65", LETTERS[1:2]) ~ "65",
distrito_nombre == "Salta" & circuito_id %in% paste0("66", LETTERS[1:2]) ~ "66",
distrito_nombre == "Salta" & circuito_id %in% paste0("67", LETTERS[1:8]) ~ "67",
distrito_nombre == "Salta" & circuito_id %in% paste0("68", LETTERS[1:2]) ~ "68",
distrito_nombre == "Salta" & circuito_id %in% paste0("69", LETTERS[1:1]) ~ "69",
distrito_nombre == "Salta" & circuito_id %in% paste0("70", LETTERS[1:2]) ~ "70",
distrito_nombre == "Salta" & circuito_id %in% paste0("71", LETTERS[1:2]) ~ "71",
distrito_nombre == "Salta" & circuito_id %in% paste0("72", LETTERS[1:4]) ~ "72",
distrito_nombre == "Salta" & circuito_id %in% paste0("73", LETTERS[1:2]) ~ "73",
distrito_nombre == "Salta" & circuito_id %in% paste0("74", LETTERS[1:1]) ~ "74",
distrito_nombre == "Salta" & circuito_id %in% paste0("75", LETTERS[1:2]) ~ "75",
distrito_nombre == "Salta" & circuito_id %in% paste0("76", LETTERS[1:1]) ~ "76",
distrito_nombre == "Salta" & circuito_id %in% paste0("77", LETTERS[1:6]) ~ "77",
distrito_nombre == "Salta" & circuito_id %in% paste0("78", LETTERS[1:1]) ~ "78",
distrito_nombre == "Salta" & circuito_id %in% paste0("79", LETTERS[1:3]) ~ "79",
distrito_nombre == "Salta" & circuito_id %in% paste0("80", LETTERS[1:1]) ~ "80",
distrito_nombre == "Salta" & circuito_id %in% paste0("81", LETTERS[1:1]) ~ "81",
distrito_nombre == "Salta" & circuito_id %in% paste0("82", LETTERS[1:2]) ~ "82",
distrito_nombre == "Salta" & circuito_id %in% paste0("83", LETTERS[1:3]) ~ "83",
distrito_nombre == "Salta" & circuito_id %in% paste0("84", LETTERS[1:1]) ~ "84",
distrito_nombre == "Salta" & circuito_id %in% paste0("85", LETTERS[1:2]) ~ "85",
distrito_nombre == "Salta" & circuito_id %in% paste0("86", LETTERS[1:1]) ~ "86",
distrito_nombre == "Salta" & circuito_id %in% paste0("87", LETTERS[1:1]) ~ "87",
distrito_nombre == "Salta" & circuito_id %in% paste0("88", LETTERS[1:3]) ~ "88",
distrito_nombre == "Salta" & circuito_id %in% paste0("89", LETTERS[1:5]) ~ "89",
distrito_nombre == "Salta" & circuito_id %in% paste0("90", LETTERS[1:3]) ~ "90",
distrito_nombre == "Salta" & circuito_id %in% paste0("91", LETTERS[1:4]) ~ "91",
distrito_nombre == "Salta" & circuito_id %in% paste0("92", LETTERS[1:1]) ~ "92",
distrito_nombre == "Salta" & circuito_id %in% paste0("93", LETTERS[1:2]) ~ "93",
distrito_nombre == "Salta" & circuito_id %in% paste0("94", LETTERS[1:1]) ~ "94",
distrito_nombre == "Salta" & circuito_id %in% paste0("95", LETTERS[1:1]) ~ "95",
distrito_nombre == "Salta" & circuito_id %in% paste0("96", LETTERS[1:2]) ~ "96",
distrito_nombre == "Salta" & circuito_id %in% paste0("97", LETTERS[1:4]) ~ "97",
distrito_nombre == "Salta" & circuito_id %in% paste0("98", LETTERS[1:1]) ~ "98",
distrito_nombre == "Salta" & circuito_id %in% paste0("99", LETTERS[1:3]) ~ "99",
TRUE ~ circuito_id))
return(r)
}
CalculoPuestos = function(datos) {
datos %>%
group_by(seccion_id, distrito_id, cargo_id) %>%
mutate(
TOTAL = sum(votos_cantidad),
PorcPositivos = ifelse(votos_tipo == "POSITIVO", votos_cantidad, NA) /
sum(ifelse(votos_tipo == "POSITIVO", votos_cantidad, 0)),
PorcTotal = votos_cantidad / sum(votos_cantidad)) %>%
mutate(Puesto = rank(-PorcPositivos, na.last = TRUE, ties.method = "first")) %>%
mutate(Puesto = ifelse(votos_tipo == "POSITIVO", Puesto, NA)) %>%
ungroup()
}
ListaCargos = c(
"PRESIDENTE Y VICE", "SENADOR NACIONAL", "DIPUTADO NACIONAL", "GOBERNADOR Y VICE",
"JEFE/A DE GOBIERNO", "PARLAMENTO MERCOSUR NACIONAL", "PARLAMENTO MERCOSUR REGIONAL")
ListaProvinciasCircuito = c(
"Ciudad Autónoma de Buenos Aires", "Buenos Aires", "Santa Fe", "Jujuy", "Neuquén", "Córdoba",
"Corrientes", "Chaco", "Chubut", "Entre Ríos", "La Pampa", "Mendoza", "Misiones", "Río Negro",
"Salta", "San Juan", "San Luis", "Santiago del Estero", "Tucumán", "Tierra del Fuego, Antártida e Islas del Atlántico Sur"
)
names(ListaProvinciasCircuito) = ListaProvinciasCircuito
names(ListaProvinciasCircuito)[ListaProvinciasCircuito == "Río Negro"] = "Río Negro (parcial)"
names(ListaProvinciasCircuito)[ListaProvinciasCircuito == "San Luis"] = "San Luis (parcial)"
datosPorDepto = datosGral %>%
filter(cargo_nombre %in% ListaCargos) %>%
# group_by(
#   año, cargo_id, cargo_nombre, distrito_id, distrito_nombre, seccion_id, seccion_nombre,
#   agrupacion_id, agrupacion_nombre, votos_tipo) %>%
group_by(cargo_nombre, distrito_nombre, seccion_nombre,agrupacion_nombre) %>%
summarise(votos_cantidad = sum(votos_cantidad, na.rm = TRUE)) %>%
ungroup() %>% CalculoPuestos(.) %>%
mutate_if(is.numeric, ~round(.x, digits = 6)) %>%
mutate_at(c("cargo_nombre", "distrito_nombre"), as.factor) %>%
CambioLugares(.) %>%
suppressMessages(.)
runApp()
runApp()
runApp()
runApp()
MapaCircuitos[["Ciudad Autónoma de Buenos Aires"]]
runApp()
runApp()
runApp('memoria.R')
runApp('memoria.R')
shiny::runApp()
runApp('memoria.R')
runApp()
runApp()
shiny::runApp()
runApp('memoria.R')
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
shiny::runApp()
runApp()
shiny::runApp()
runApp()
runApp()
max(datosPorDepto$Puesto)
max(datosPorDepto$Puesto, na.rm = TRUE)
runApp()
runApp()
runApp()
runApp()
runApp()
gc()
runApp()
variable.names(datosPorDepto)
runApp()
runApp()
gc()
lll = Mapear(datos = datosPorDepto, ColoresPartido = ColoresPartido, Mapa = departamentos)
lll$Mapa %>% variable.names(.)
runApp()
gc()
lll$Datos %>% variable.names(.)
runApp()
gc()
shiny::runApp()
runApp()
install.packages("shinycssloaders")
renv::snapshot()
